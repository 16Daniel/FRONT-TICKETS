<p-dialog header="CREAR ETIQUETA" [modal]="true" [(visible)]="mostrarModal" [style]="{ width: '60vw'}"
    [breakpoints]="{ '1199px': '75vw', '575px': '90vw' }" [maximizable]="true" (onHide)="onHide()">

    <!-- FORMULARIO REAL -->
    <form #f="ngForm" (ngSubmit)="enviar(f)">
        <div class="row align-items-center">

            <!-- INPUT NOMBRE -->
            <div class="col-md-6">
                <p class="fw-bold mb-1">NOMBRE DE LA ETIQUETA</p>

                <input class="form-control" style="height: 48px;" type="text" placeholder="ESCRIBE EL NOMBRE"
                    [(ngModel)]="nuevaEtiqueta.nombre" name="nombre" required minlength="3" maxlength="40"
                    #nombreCtrl="ngModel" [ngClass]="{'p-invalid': nombreCtrl.invalid && nombreCtrl.touched}" />

                <small *ngIf="nombreCtrl.errors?.['required'] && nombreCtrl.touched" class="p-error">
                    Campo requerido.
                </small>
                <small *ngIf="nombreCtrl.errors?.['minlength'] && nombreCtrl.touched" class="p-error">
                    MÃ­nimo 3 caracteres.
                </small>
            </div>

            <!-- COLOR PICKER -->
            <div class="col-auto">
                <p class="fw-bold mb-1">COLOR</p>

                <p-colorPicker [(ngModel)]="nuevaEtiqueta.color" name="color" required #colorCtrl="ngModel"
                    [ngClass]="{'p-invalid': colorCtrl.invalid && colorCtrl.touched}">
                </p-colorPicker>

                <small *ngIf="colorCtrl.errors?.['required'] && colorCtrl.touched" class="p-error">
                    Selecciona un color.
                </small>
            </div>

            <!-- BOTON AGREGAR -->
            <div class="col-auto mt-4 pt-2">

                <button pButton type="submit" label="Agregar" [disabled]="f.invalid || cargando">
                </button>

            </div>

        </div>
    </form>

    <!-- TABLA -->
    <div class="mt-4" style="min-height: 300px;">
        <p-table [value]="etiquetas" [tableStyle]="{ 'min-width': '50rem', 'min-height': '20rem' }">

            <ng-template pTemplate="header">
                <tr>
                    <th>Nombre</th>
                    <th>Color</th>
                    <!-- <th>Vista</th> -->
                    <th>Eliminar</th>
                </tr>
            </ng-template>

            <ng-template pTemplate="body" let-et>
                <tr>
                    <!-- NOMBRE -->
                    <td>{{ et.nombre }}</td>

                    <!-- COLOR PICKER (editable) -->
                    <td>
                        <p-colorPicker [(ngModel)]="et.color" (onChange)="actualizarColor(et)">
                        </p-colorPicker>
                    </td>

                    <!-- VISTA DEL COLOR -->
                    <!-- <td>
                        <div [style.background]="et.color"
                            style="width: 35px; height: 35px; border-radius: 6px; border: 1px solid #ccc;">
                        </div>
                    </td> -->

                    <!-- BOTON ELIMINAR -->
                    <td>
                        <p-button icon="pi pi-trash" severity="danger" (onClick)="eliminarEtiqueta(et)">
                        </p-button>
                    </td>
                </tr>
            </ng-template>

        </p-table>
    </div>

</p-dialog>
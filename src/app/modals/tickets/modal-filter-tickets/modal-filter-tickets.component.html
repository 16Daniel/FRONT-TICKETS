<p-dialog header="FILTRAR TICKETS" [modal]="true" [(visible)]="showModalFilterTickets" [style]="{ width: '50rem' }"
    [breakpoints]="{ '1199px': '75vw', '575px': '90vw' }" [maximizable]="true" (onHide)="onHide()">

    <p-dropdown *ngIf="sucursales.length>0" [options]="sucursales" [(ngModel)]="filterSucursal" optionLabel="nombre" [filter]="true"
        filterBy="nombre" [showClear]="true" placeholder="SELECCIONAR SUCURSAL" [style]="{ width: '100%' }">
        <ng-template pTemplate="selectedItem" let-selectedOption>
            <div class="flex align-items-center gap-2">
                <div>{{ selectedOption.nombre }}</div>
            </div>
        </ng-template>
        <ng-template let-categoria pTemplate="item">
            <div class="flex align-items-center gap-2">
                <div>{{ categoria.nombre }}</div>
            </div>
        </ng-template>
    </p-dropdown>
    <p></p>
    <p-dropdown [options]="areas" [(ngModel)]="filterarea" optionLabel="nombre" [filter]="true"
        filterBy="nombre" [showClear]="true" placeholder="SELECCIONAR ÁREA" [style]="{ width: '100%' }"
        (onChange)="onChangeArea()">
        <ng-template pTemplate="selectedItem" let-selectedOption>
            <div class="flex align-items-center gap-2">
                <div>{{ selectedOption.nombre }}</div>
            </div>
        </ng-template>
        <ng-template let-dep pTemplate="item">
            <div class="flex align-items-center gap-2">
                <div>{{ dep.nombre }}</div>
            </div>
        </ng-template>
    </p-dropdown>
    <p></p>
    <p-dropdown [options]="categorias" [(ngModel)]="filtercategoria" optionLabel="name" [filter]="true"
        filterBy="nombre" [showClear]="true" placeholder="SELECCIONAR CATEGORIA" [style]="{ width: '100%' }">
        <ng-template pTemplate="selectedItem" let-selectedOption>
            <div class="flex align-items-center gap-2">
                <div>{{ selectedOption.nombre }}</div>
            </div>
        </ng-template>
        <ng-template let-categoria pTemplate="item">
            <div class="flex align-items-center gap-2">
                <div>{{ categoria.nombre }}</div>
            </div>
        </ng-template>
    </p-dropdown>
    <P></P>
    <p-dropdown [options]="prioridadesTicket" [(ngModel)]="filterPrioridad" optionLabel="nombre" [filter]="false" filterBy="nombre" [showClear]="true"
        placeholder="SELECCIONAR PRIORIDAD" [style]="{ width: '100%' }">
        <ng-template pTemplate="selectedItem" let-selectedOption>
            <div class="flex align-items-center gap-2">
                <div>{{ selectedOption.nombre }}</div>
            </div>
        </ng-template>
        <ng-template let-item pTemplate="item">
            <div class="flex align-items-center gap-2">
                <div class="d-flex justify-content-start align-items-center gap-3">
                    <td *ngIf="item.id == '1'">
                        <i class="bx bxs-hot bx-sm rounded-3" style="color: red"></i>
                    </td>
                    <div *ngIf="item.id != '1'" style="border-radius: 50%" class="p-3" [style]="{
              'background-color': obtenerBackgroundColorPrioridad(item.nombre),
              width: '30px',
              height: '30px'
            }"></div>
                    <div>{{ item.nombre }}</div>
                </div>
            </div>
        </ng-template>
    </p-dropdown>
    <p></p>
    <p-dropdown [options]="statusTicket" [(ngModel)]="filterstatus" optionLabel="nombre" [filter]="false"
        filterBy="nombre" [showClear]="true" placeholder="SELECCIONAR STATUS" [style]="{ width: '100%' }">
        <ng-template pTemplate="selectedItem" let-selectedOption>
            <div class="flex align-items-center gap-2">
                <div>{{ selectedOption.nombre }}</div>
            </div>
        </ng-template>
        <ng-template let-dep pTemplate="item">
            <div class="flex align-items-center gap-2">
                <div>{{ dep.nombre }}</div>
            </div>
        </ng-template>
    </p-dropdown>
    <p></p>

    <div style="height: 150px"></div>
    <div class="d-flex justify-content-between">
        <button class="btn btn-secondary p-3" (click)="limpiarFiltros()">
            LIMPIAR <i class="bx bx-brush-alt bx-sm"></i>
        </button>
        <button class="btn bg-p-b p-3" style="background-color: #ff5722" (click)="filtrarTickets()">
            FILTRAR <i class="bx bx-filter bx-sm"></i>
        </button>
    </div>
</p-dialog>
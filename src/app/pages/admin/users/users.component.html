<div class="pt-5">
    <div class="pt-3 container">
        <div class="m-2 mt-3 bg-white p-3" *ngIf="foundData && loading == false">
            <div class="d-flex justify-content-between align-items-center">
                <h2>LISTA DE USUARIOS</h2>
                <p-button label="AGREGAR" icon="pi pi-plus" styleClass="p-button-info" (click)="showAgregar()">
                </p-button>
            </div>
            <br>

            <p-table [value]="catusuarios" [tableStyle]="{ 'min-width': '10rem', padding: '10px' }"
                styleClass="p-datatable-gridlines table-tk" [scrollable]="true" scrollHeight="62vh">
                <ng-template pTemplate="header">
                    <tr>
                        <th>NOMBRE</th>
                        <th>CORREO</th>
                        <th>ROL</th>
                        <th>ACCIONES</th>
                    </tr>
                </ng-template>
                <ng-template pTemplate="body" let-usuario>
                    <tr [pSelectableRow]="usuario">
                        <td>{{usuario.nombre}} {{usuario.apellidoP}} {{usuario.apellidoM}}</td>
                        <td>{{usuario.email}}</td>
                        <td>{{getrolname(usuario.idRol)}}</td>
                        <td>
                            <button class="btn btn-primary me-3" (click)="showEdit(usuario)"><i
                                    class='bx bx-edit bx-sm' pTooltip="EDITAR" tooltipPosition="top"></i></button>

                            <button class="btn btn-danger" (click)="confirm(usuario.id)"><i
                                    class='bx bx-trash bx-sm' pTooltip="ELIMINAR" tooltipPosition="top"></i></button>
                        </td>
                    </tr>
                </ng-template>
            </p-table>
        </div>
    </div>
</div>







<p-toast [breakpoints]="{'920px': {width: '100%', right: '0', left: '0'}}" [showTransformOptions]="'translateY(100%)'"
    [showTransitionOptions]="'500ms'" [hideTransitionOptions]="'500ms'"
    [showTransformOptions]="'translateX(100%)'"></p-toast>
<p-confirmDialog>
    <ng-template pTemplate="message" let-message>
        <div class="flex flex-column align-items-center w-full gap-3 border-bottom-1 surface-border">
            <i class="pi pi-exclamation-circle text-6xl text-primary-500"></i>
            <p>{{ message.message }}</p>
        </div>
    </ng-template>
</p-confirmDialog>


<p-dialog [header]="actualizar ? 'Actualizar' :'Agregar'" [(visible)]="modalAgregar" [modal]="true"
    [style]="{ 'width': '95vh', 'max-width':'50rem' }" [draggable]="false" [resizable]="false">

    <p class="fw-bold">NOMBRE</p>
    <input type="text" class="form-control p-1 mb-3" [(ngModel)]="formnombre">
    <p class="fw-bold">APELLIDO PATERNO</p>
    <input type="text" class="form-control p-1 mb-3" [(ngModel)]="formapellidop">
    <p class="fw-bold">APELLIDO MATERNO</p>
    <input type="text" class="form-control p-1 mb-3" [(ngModel)]="formapellidom">
    <p class="fw-bold">CORREO</p>
    <input type="email" class="form-control p-1 mb-3" [(ngModel)]="formemail">
    <p class="fw-bold">CONTRASEÃ‘A</p>
    <input type="password" class="form-control p-1 mb-3" [(ngModel)]="formpass">

    <p class="fw-bold">ROL DE USUARIO</p>
    <select class="form-select" [(ngModel)]="formrolsel">
        <input type="text">
        <option *ngFor="let item of catroles" [value]="item.id">{{item.nombre}}</option>
    </select>

    <p></p>
    <p-multiSelect [style]="{'width':'100%'}" [options]="catsucursales" [(ngModel)]="sucursalessel" optionLabel="nombre"
        placeholder="Seleccionar sucursales" />


    <div class="mt-3 mb-3 d-flex  justify-content-end">
        <button class="btn btn-warning" (click)="adduser()" style="margin: 2px" *ngIf="actualizar == false">
            <i class="bx bx-check-circle bx-sm" pTooltip="EDITAR" tooltipPosition="top"></i>
        </button>

        <!-- <button pTooltip="EDITAR" tooltipPosition="top" class="btn bg-p-b p-3 rounded-4" (click)="adduser()"
            *ngIf="actualizar == false"> <i class='bx bx-save'></i> GUARDAR</button> -->
        <button pTooltip="ELIMINAR" tooltipPosition="top" class="btn bg-p-b p-3 rounded-4" (click)="updateData()"
            *ngIf="actualizar"> <i class='bx bx-save'></i>
            ACTUALIZAR</button>
    </div>


</p-dialog>